webpackJsonp([436],{1730:function(e,s,a){var l=a(67)(a(915),a(2041),null,null,null);l.options.__file="/home/runner/work/vux/vux/docs/node_modules/v-markdown-loader/_cache/how-vux-loader-works-311.vue",l.esModule&&Object.keys(l.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),l.options.functional&&console.error("[vue-loader] how-vux-loader-works-311.vue: functional components are not supported with templates, they should use render functions."),e.exports=l.exports},2041:function(e,s,a){e.exports={render:function(){var e=this,s=e.$createElement;e._self._c;return e._m(0)},staticRenderFns:[function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("div",[a("h1",[e._v("vux-loader 实现方式")]),e._v(" "),a("p",[e._v("说明一下"),a("code",[e._v("vux-loader")]),e._v("是如何和"),a("code",[e._v("vue-loader")]),a("del",[e._v("搞基")]),e._v("配合的。")]),e._v(" "),a("p",[e._v("如果你看过"),a("code",[e._v("webpack")]),e._v("loader的介绍，理论上说如果需要自己手动先处理代码再传入"),a("code",[e._v("vue-loader")]),e._v(",你只需要这样对loader做配置: "),a("code",[e._v("vue-loader!my-loader")]),e._v("。但是如果你试过，就知道这个目前行不通。"),a("code",[e._v("vue-loader")]),e._v("不会接收上一个loader的source进行处理，因为.vue文件的特殊性，它直接生成了loader string进入下一个处理，处理后的结果大概是这样的：")]),e._v(" "),a("pre",{staticClass:"hljs"},[a("code",[a("span",{staticClass:"hljs-comment"},[e._v("/* styles */")]),e._v("\n"),a("span",{staticClass:"hljs-built_in"},[e._v("require")]),e._v("("),a("span",{staticClass:"hljs-string"},[e._v('"!!vue-style-loader!css-loader!vue-loader/lib/style-rewriter?id=data-v-20d7ba9a!vue-loader/lib/selector?type=styles&index=0!./index.vue"')]),e._v(")\n\n"),a("span",{staticClass:"hljs-comment"},[e._v("/* script */")]),e._v("\n__vue_exports__ = "),a("span",{staticClass:"hljs-built_in"},[e._v("require")]),e._v("("),a("span",{staticClass:"hljs-string"},[e._v('"!!babel-loader!vue-loader/lib/selector?type=script&index=0!./index.vue"')]),e._v(")\n\n"),a("span",{staticClass:"hljs-comment"},[e._v("/* template */")]),e._v("\n"),a("span",{staticClass:"hljs-keyword"},[e._v("var")]),e._v(" __vue_template__ = "),a("span",{staticClass:"hljs-built_in"},[e._v("require")]),e._v("("),a("span",{staticClass:"hljs-string"},[e._v('"!!vue-loader/lib/template-compiler?id=data-v-20d7ba9a!vue-loader/lib/selector?type=template&index=0!./index.vue"')]),e._v(")\n")])]),e._v(" "),a("p",[e._v("那么vue-loader提供了自定义loader string的选项，直接配置可否呢，"),a("a",{attrs:{href:"https://github.com/vuejs/vue-loader/issues/531"}},[e._v("#531")]),e._v("，直接配置会破坏原来的loader参数，导致不能Live reload。")]),e._v(" "),a("p",[e._v("那么最终能想到的就是直接修改"),a("code",[e._v("vue-loader")]),e._v("生成的代码，这样既不会影响"),a("code",[e._v("vue-loader")]),e._v("原来的逻辑，也能自由控制。")]),e._v(" "),a("p",[e._v("最终实现方式是前置"),a("code",[e._v("vux-loader")]),e._v("即："),a("code",[e._v("vux-loader!vue-loader")]),e._v("，vux-loader将vue-loader生成的代码二次处理，分割loader string并(强行)插入vux的 template-loader, style-loader, script-loader，那么你就能理解vux-loader的配置方式了，在3大基本loader里获取到vux-loader的插件配置列表逐个做处理就行了。")]),e._v(" "),a("p",[e._v("上面的代码强行处理后是这样的：")]),e._v(" "),a("pre",{staticClass:"hljs"},[a("code",[a("span",{staticClass:"hljs-comment"},[e._v("/* styles */")]),e._v("\n"),a("span",{staticClass:"hljs-built_in"},[e._v("require")]),e._v("("),a("span",{staticClass:"hljs-string"},[e._v('"!!vue-style-loader!css-loader!vue-loader/lib/style-rewriter?id=data-v-20d7ba9a!./../../../../vux-loader/src/style-loader.js!vue-loader/lib/selector?type=styles&index=0!./index.vue"')]),e._v(")\n\n"),a("span",{staticClass:"hljs-comment"},[e._v("/* script */")]),e._v("\n__vue_exports__ = "),a("span",{staticClass:"hljs-built_in"},[e._v("require")]),e._v("("),a("span",{staticClass:"hljs-string"},[e._v('"!!babel-loader!vue-loader/lib/selector?type=script&index=0!./../../../../vux-loader/src/script-loader.js!./index.vue"')]),e._v(")\n\n"),a("span",{staticClass:"hljs-comment"},[e._v("/* template */")]),e._v("\n"),a("span",{staticClass:"hljs-keyword"},[e._v("var")]),e._v(" __vue_template__ = "),a("span",{staticClass:"hljs-built_in"},[e._v("require")]),e._v("("),a("span",{staticClass:"hljs-string"},[e._v('"!!vue-loader/lib/template-compiler?id=data-v-20d7ba9a!./../../../../vux-loader/src/template-loader.js!vue-loader/lib/selector?type=template&index=0!./index.vue"')]),e._v(")\n")])]),e._v(" "),a("p",[e._v("原理就是这么简单（但是处理时还是遇到一些问题），为了方便使用，编写了常用的一些插件。")]),e._v(" "),a("p",[e._v("至于"),a("code",[e._v("js-parser")]),e._v("就只是在"),a("code",[e._v("babel-loader")]),e._v("前加上了"),a("code",[e._v("vux-loader")]),e._v("的"),a("code",[e._v("js-loader")]),e._v("。")]),e._v(" "),a("p",[e._v("而所有的loader, plugins设置都是在"),a("code",[e._v("vux-loader")]),e._v("的"),a("code",[e._v("merge")]),e._v("方法里来完成。")])])}]},e.exports.render._withStripped=!0},779:function(e,s,a){e.exports=a(1730)},915:function(e,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default={head:{title:"vux-loader 实现方式 | VUX - Vue 移动端 UI 组件库",ignoreSuffixChar:"|"}}}});
//# sourceMappingURL=436.62a11739.js.map